---
const { title, cover, coveralt, desc, url, audioUrl, id, pubDate, duration, explicit, episode, season } = Astro.props;
import podcastConfig from "../../podcast.config.json";
import MediaEnclosure from "../components/MediaEnclosure.astro";
import formatTime  from "../modules/field_formatter.js";
import dayjs from "dayjs";
import localizedFormat from "dayjs/plugin/localizedFormat";
dayjs.extend(localizedFormat);

let coverURL = cover ? cover : podcastConfig.cover;
const dateFormatted = dayjs(pubDate).format("ll");
const durationFormatted = formatTime(duration);

const epidodeInfoClasses = "episode-info" + " " + (explicit ? "episode-explicit" : "");
---
<li class="box-content p-4 m-4 bg-sky-300">
  <section class="cover-image">
    <a href={url}><img width={720} height={360} src={coverURL} alt={coveralt} /></a>
  </section>
  <section class={epidodeInfoClasses}>
    <a href={url}>
      <h3 class="text-2xl">{title}</h3>
    </a>
    <div class="text-lg"><strong>published date: </strong>{dateFormatted}</div>
    <div class="text-lg"><strong>duration: </strong>{durationFormatted} </div>
    <div class="text-lg">{desc}</div>
  </section>
  <section class="episode-enclosure">
     <MediaEnclosure audioUrl={audioUrl} id={id} />
  </section>
</li>